<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: Puma::DSL &mdash; Puma</title>

<link rel='stylesheet'  type='text/css' href='../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "Puma::DSL",
    relpath = '../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../index.html'>Puma</a> &raquo; 
      <a href='../_index.html#alpha_D'>Index (D)</a> &raquo; 
        <a href="../Puma.html" title="Puma (module)">Puma</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>DSL&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='class'>
<h1>Class: Puma::DSL</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Super Chains via Extension / Inclusion / Inheritance</td></tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Instance Chain:</div>
        <div class='box_22'>
          self,
          <a href="ConfigDefault.html" title="Puma::ConfigDefault (module)">ConfigDefault</a>
        </div>
      </td>
    </tr>
    <tr>
      <td id='t2_inherits' class='box_2'>Inherits:</td>
      <td class='box_rel'>
        <span class='inheritName'><a href="../Object.html" title="Object (class)">Object</a></span>
      </td>
    </tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/puma/puma/blob/v5.0.4/lib/puma/dsl.rb#L34'>lib/puma/dsl.rb</a>      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    
<p>The methods that are available for use inside the configuration file. These same methods are used in <a href="../Puma.html" title="Puma (module)">::Puma</a> cli and the rack handler internally.</p>

<p>Used manually (via <a href="CLI.html" title="Puma::CLI (class)">CLI</a> class):</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_config'>config</span> <span class='op'>=</span> <span class='const'><a href="Configuration.html" title="Puma::Configuration (class)">Configuration</a></span>.<span class='id identifier rubyid_new'><a href="Configuration.html#new-class_method" title="Puma::Configuration.new (method)">new</a></span>({}) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_user_config'>user_config</span><span class='op'>|</span>
  <span class='id identifier rubyid_user_config'>user_config</span>.<span class='id identifier rubyid_port'><a href="#port-instance_method" title="Puma::DSL#port (method)">port</a></span> <span class='int'>3001</span>
<span class='kw'>end</span>
<span class='id identifier rubyid_config'>config</span>.<span class='id identifier rubyid_load'><a href="#load-instance_method" title="Puma::DSL#load (method)">load</a></span>

<span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_config'>config</span>.<span class='id identifier rubyid_options'>options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_binds'>binds</span>] <span class='comment'># =&gt; &quot;tcp://127.0.0.1:3001&quot;</span></code></pre>

<p>Used to load file:</p>

<pre class="code ruby"><code class="ruby">$ cat puma_config.rb
port 3002</code></pre>

<p>Resulting configuration:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_config'>config</span> <span class='op'>=</span> <span class='const'><a href="Configuration.html" title="Puma::Configuration (class)">Configuration</a></span>.<span class='id identifier rubyid_new'><a href="Configuration.html#new-class_method" title="Puma::Configuration.new (method)">new</a></span>(<span class='label'>config_file:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>puma_config.rb</span><span class='tstring_end'>&quot;</span></span>)
<span class='id identifier rubyid_config'>config</span>.<span class='id identifier rubyid_load'><a href="#load-instance_method" title="Puma::DSL#load (method)">load</a></span>

<span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_config'>config</span>.<span class='id identifier rubyid_options'>options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_binds'>binds</span>] <span class='comment'># =&gt; &quot;tcp://127.0.0.1:3002&quot;</span></code></pre>

<p>You can also find many examples being used by the test suite in <code>test/config</code>.</p>

  </div>
</div>
</div>
<h2 id='t2_cnst' class='h2_sum'>Constant Summary</h2>
<div>
  <h3 class='inherited'><a href="ConfigDefault.html" title="Puma::ConfigDefault (module)">ConfigDefault</a> - Included</h3>
  <p  class='inherited'>
    <a href="ConfigDefault.html#DefaultRackup-constant" title="Puma::ConfigDefault::DefaultRackup (constant)">DefaultRackup</a>, 
    <a href="ConfigDefault.html#DefaultTCPHost-constant" title="Puma::ConfigDefault::DefaultTCPHost (constant)">DefaultTCPHost</a>, 
    <a href="ConfigDefault.html#DefaultTCPPort-constant" title="Puma::ConfigDefault::DefaultTCPPort (constant)">DefaultTCPPort</a>, 
    <a href="ConfigDefault.html#DefaultWorkerShutdownTimeout-constant" title="Puma::ConfigDefault::DefaultWorkerShutdownTimeout (constant)">DefaultWorkerShutdownTimeout</a>, 
    <a href="ConfigDefault.html#DefaultWorkerTimeout-constant" title="Puma::ConfigDefault::DefaultWorkerTimeout (constant)">DefaultWorkerTimeout</a>
  </p>
</div>

<h2 class='h2_sum' id='class_method_summary'>Class Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#new-class_method" title=".new (class method)">.<strong>new</strong>(options, config)  &#x21d2; DSL </a>
    </span>
    <span class='note title constructor'>constructor</span>
  </li>
</ul>
</div>  <!-- class_method_summary -->

<h2 class='h2_sum' id='instance_method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#_load_from-instance_method" title="#_load_from (instance method)">#<strong>_load_from</strong>(path)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#_offer_plugins-instance_method" title="#_offer_plugins (instance method)">#<strong>_offer_plugins</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#activate_control_app-instance_method" title="#activate_control_app (instance method)">#<strong>activate_control_app</strong>(url = &quot;auto&quot;, opts = {})  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Start the <a href="../Puma.html" title="Puma (module)">::Puma</a> control rack application on <code>url</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#after_worker_boot-instance_method" title="#after_worker_boot (instance method)">#<strong>after_worker_boot</strong>(&amp;block)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#after_worker_fork-instance_method" title="Puma::DSL#after_worker_fork (method)">#after_worker_fork</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#after_worker_fork-instance_method" title="#after_worker_fork (instance method)">#<strong>after_worker_fork</strong>(&amp;block)  </a>
      (also: #after_worker_boot)
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Code to run in the master after a worker has been started.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#app-instance_method" title="#app (instance method)">#<strong>app</strong>(obj = nil, &amp;block)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Use an object or block as the rack application.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#before_fork-instance_method" title="#before_fork (instance method)">#<strong>before_fork</strong>(&amp;block)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Code to run immediately before master process forks workers (once on boot).</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#bind-instance_method" title="#bind (instance method)">#<strong>bind</strong>(url)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Bind the server to <code>url</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#clean_thread_locals-instance_method" title="#clean_thread_locals (instance method)">#<strong>clean_thread_locals</strong>(which = true)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Work around leaky apps that leave garbage in Thread locals across requests.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#clear_binds!-instance_method" title="#clear_binds! (instance method)">#<strong>clear_binds!</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#debug-instance_method" title="#debug (instance method)">#<strong>debug</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Show debugging info.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#default_host-instance_method" title="#default_host (instance method)">#<strong>default_host</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#directory-instance_method" title="#directory (instance method)">#<strong>directory</strong>(dir)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>The directory to operate out of.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#drain_on_shutdown-instance_method" title="#drain_on_shutdown (instance method)">#<strong>drain_on_shutdown</strong>(which = true)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>When shutting down, drain the accept socket of pending connections and process them.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#early_hints-instance_method" title="#early_hints (instance method)">#<strong>early_hints</strong>(answer = true)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#environment-instance_method" title="#environment (instance method)">#<strong>environment</strong>(environment)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Set the environment in which the rack&#39;s app will run.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#extra_runtime_dependencies-instance_method" title="#extra_runtime_dependencies (instance method)">#<strong>extra_runtime_dependencies</strong>(answer = [])  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>When using prune_bundler, if extra runtime dependencies need to be loaded to initialize your app, then this setting can be used.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#first_data_timeout-instance_method" title="#first_data_timeout (instance method)">#<strong>first_data_timeout</strong>(seconds)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Define how long the tcp socket stays open, if no data has been received.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#force_shutdown_after-instance_method" title="#force_shutdown_after (instance method)">#<strong>force_shutdown_after</strong>(val = :forever)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>How long to wait for threads to stop when shutting them down.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#fork_worker-instance_method" title="#fork_worker (instance method)">#<strong>fork_worker</strong>(after_requests = 1000)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>When enabled, workers will be forked from worker 0 instead of from the master process.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#get-instance_method" title="#get (instance method)">#<strong>get</strong>(key, default = nil)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#inject-instance_method" title="#inject (instance method)">#<strong>inject</strong>(&amp;blk)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#load-instance_method" title="#load (instance method)">#<strong>load</strong>(file)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Load additional configuration from a file Files get loaded later via <a href="Configuration.html#load-instance_method" title="Puma::Configuration#load (method)">Configuration#load</a></p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#log_formatter-instance_method" title="#log_formatter (instance method)">#<strong>log_formatter</strong>(&amp;block)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#log_requests-instance_method" title="#log_requests (instance method)">#<strong>log_requests</strong>(which = true)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Enable request logging.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#lowlevel_error_handler-instance_method" title="#lowlevel_error_handler (instance method)">#<strong>lowlevel_error_handler</strong>(obj = nil, &amp;block)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Use <code>obj</code> or <code>block</code> as the low level error handler.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#nakayoshi_fork-instance_method" title="#nakayoshi_fork (instance method)">#<strong>nakayoshi_fork</strong>(enabled = true)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>When enabled, <a href="../Puma.html" title="Puma (module)">::Puma</a> will GC 4 times before forking workers.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#on_refork-instance_method" title="#on_refork (instance method)">#<strong>on_refork</strong>(&amp;block)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>When <a href="#fork_worker-instance_method" title="Puma::DSL#fork_worker (method)">#fork_worker</a> is enabled, code to run in Worker 0 before all other workers are re-forked from this process, after the server has temporarily stopped serving requests (once per complete refork cycle).</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#on_restart-instance_method" title="#on_restart (instance method)">#<strong>on_restart</strong>(&amp;block)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Code to run before doing a restart.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#on_worker_boot-instance_method" title="#on_worker_boot (instance method)">#<strong>on_worker_boot</strong>(&amp;block)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Code to run in a worker when it boots to setup the process before booting the app.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#on_worker_fork-instance_method" title="#on_worker_fork (instance method)">#<strong>on_worker_fork</strong>(&amp;block)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Code to run in the master right before a worker is started.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#on_worker_shutdown-instance_method" title="#on_worker_shutdown (instance method)">#<strong>on_worker_shutdown</strong>(&amp;block)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Code to run immediately before a worker shuts down (after it has finished processing HTTP requests).</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#out_of_band-instance_method" title="#out_of_band (instance method)">#<strong>out_of_band</strong>(&amp;block)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Code to run out-of-band when the worker is idle.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#persistent_timeout-instance_method" title="#persistent_timeout (instance method)">#<strong>persistent_timeout</strong>(seconds)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Define how long persistent connections can be idle before <a href="../Puma.html" title="Puma (module)">::Puma</a> closes them.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#pidfile-instance_method" title="#pidfile (instance method)">#<strong>pidfile</strong>(path)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Store the pid of the server in the file at “path”.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#plugin-instance_method" title="#plugin (instance method)">#<strong>plugin</strong>(name)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Load the named plugin for use by this configuration.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#port-instance_method" title="#port (instance method)">#<strong>port</strong>(port, host = nil)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Define the TCP port to bind to.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#preload_app!-instance_method" title="#preload_app! (instance method)">#<strong>preload_app!</strong>(answer = true)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Preload the application before starting the workers; this conflicts with phased restart feature.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#prune_bundler-instance_method" title="#prune_bundler (instance method)">#<strong>prune_bundler</strong>(answer = true)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>This option is used to allow your app and its gems to be properly reloaded when not using preload.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#queue_requests-instance_method" title="#queue_requests (instance method)">#<strong>queue_requests</strong>(answer = true)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>When set to true (the default), workers accept all requests and queue them before passing them to the handlers.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#quiet-instance_method" title="#quiet (instance method)">#<strong>quiet</strong>(which = true)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Disable request logging, if this isn&#39;t used it&#39;ll be enabled by default.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#rackup-instance_method" title="#rackup (instance method)">#<strong>rackup</strong>(path)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Load <code>path</code> as a rackup file.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#raise_exception_on_sigterm-instance_method" title="#raise_exception_on_sigterm (instance method)">#<strong>raise_exception_on_sigterm</strong>(answer = true)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>By default, <a href="../Puma.html" title="Puma (module)">::Puma</a> will raise SignalException when SIGTERM is received.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#restart_command-instance_method" title="#restart_command (instance method)">#<strong>restart_command</strong>(cmd)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Command to use to restart <a href="../Puma.html" title="Puma (module)">::Puma</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#set_default_host-instance_method" title="#set_default_host (instance method)">#<strong>set_default_host</strong>(host)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#set_remote_address-instance_method" title="#set_remote_address (instance method)">#<strong>set_remote_address</strong>(val = :socket)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Control how the remote address of the connection is set.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#shutdown_debug-instance_method" title="#shutdown_debug (instance method)">#<strong>shutdown_debug</strong>(val = true)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>When a shutdown is requested, the backtraces of all the threads will be written to $stdout.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#ssl_bind-instance_method" title="#ssl_bind (instance method)">#<strong>ssl_bind</strong>(host, port, opts)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Instead of <code>bind &#39;ssl://127.0.0.1:9292?key=key_path&amp;cert=cert_path&#39;</code> you can also use the this method.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#state_path-instance_method" title="#state_path (instance method)">#<strong>state_path</strong>(path)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Use <code>path</code> as the file to store the server info state.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#state_permission-instance_method" title="#state_permission (instance method)">#<strong>state_permission</strong>(permission)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Use <code>permission</code> to restrict permissions for the state file.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#stdout_redirect-instance_method" title="#stdout_redirect (instance method)">#<strong>stdout_redirect</strong>(stdout = nil, stderr = nil, append = false)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Redirect <code>STDOUT</code> and <code>STDERR</code> to files specified.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#tag-instance_method" title="#tag (instance method)">#<strong>tag</strong>(string)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Additional text to display in process listing.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#threads-instance_method" title="#threads (instance method)">#<strong>threads</strong>(min, max)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Configure <code>min</code> to be the minimum number of threads to use to answer requests and <code>max</code> the maximum.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#wait_for_less_busy_worker-instance_method" title="#wait_for_less_busy_worker (instance method)">#<strong>wait_for_less_busy_worker</strong>(val = 0.005)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Attempts to route traffic to less-busy workers by causing them to delay listening on the socket, allowing workers which are not processing any requests to pick up new requests first.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#worker_boot_timeout-instance_method" title="#worker_boot_timeout (instance method)">#<strong>worker_boot_timeout</strong>(timeout)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Change the default worker timeout for booting.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#worker_shutdown_timeout-instance_method" title="#worker_shutdown_timeout (instance method)">#<strong>worker_shutdown_timeout</strong>(timeout)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Set the timeout for worker shutdown.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#worker_timeout-instance_method" title="#worker_timeout (instance method)">#<strong>worker_timeout</strong>(timeout)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Verifies that all workers have checked in to the master process within the given timeout.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#workers-instance_method" title="#workers (instance method)">#<strong>workers</strong>(count)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>How many worker processes to run.</p></div>
    </div>
  </li>
</ul>
</div>  <!-- instance_method_summary -->
<h2 id='Constructor_Details' class='y_details'>Constructor Details</h2>

  <section class='method_details first' id="new-class_method">
  <h3 class='signature  first'>
    .<strong>new</strong>(options, config)  &#x21d2; <code>DSL</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/v5.0.4/lib/puma/dsl.rb#L37-L42'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='37' data-end='42'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 37</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span>(<span class='id identifier rubyid_options'>options</span><span class='comma'>,</span> <span class='id identifier rubyid_config'>config</span>)
  <span class='ivar'>@config</span>  <span class='op'>=</span> <span class='id identifier rubyid_config'>config</span>
  <span class='ivar'>@options</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span>

  <span class='ivar'>@plugins</span> <span class='op'>=</span> []
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="_load_from-instance_method">
  <h3 class='signature  first'>
    #<strong>_load_from</strong>(path)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/v5.0.4/lib/puma/dsl.rb#L44-L51'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='44' data-end='51'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 44</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid__load_from'>_load_from</span>(<span class='id identifier rubyid_path'>path</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_path'>path</span>
    <span class='ivar'>@path</span> <span class='op'>=</span> <span class='id identifier rubyid_path'>path</span>
    <span class='id identifier rubyid_instance_eval'>instance_eval</span>(<span class='const'>File</span>.<span class='id identifier rubyid_read'>read</span>(<span class='id identifier rubyid_path'>path</span>)<span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='int'>1</span>)
  <span class='kw'>end</span>
<span class='kw'>ensure</span>
  <span class='id identifier rubyid__offer_plugins'><a href="#_offer_plugins-instance_method" title="Puma::DSL#_offer_plugins (method)">_offer_plugins</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="_offer_plugins-instance_method">
  <h3 class='signature '>
    #<strong>_offer_plugins</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/v5.0.4/lib/puma/dsl.rb#L53-L62'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='53' data-end='62'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 53</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid__offer_plugins'>_offer_plugins</span>
  <span class='ivar'>@plugins</span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_o'>o</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_o'>o</span>.<span class='id identifier rubyid_respond_to?'>respond_to?</span> <span class='symbeg'>:</span><span class='id identifier rubyid_config'>config</span>
      <span class='ivar'>@options</span>.<span class='id identifier rubyid_shift'>shift</span>
      <span class='id identifier rubyid_o'>o</span>.<span class='id identifier rubyid_config'>config</span> <span class='kw'>self</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='ivar'>@plugins</span>.<span class='id identifier rubyid_clear'>clear</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="activate_control_app-instance_method">
  <h3 class='signature '>
    #<strong>activate_control_app</strong>(url = &quot;auto&quot;, opts = {})  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Start the <a href="../Puma.html" title="Puma (module)">::Puma</a> control rack application on <code>url</code>. This application can be communicated with to control the main server. Additionally, you can provide an authentication token, so all requests to the control server will need to include that token as a query parameter. This allows for simple authentication.</p>

<p>Check out <a href="App/Status.html" title="Puma::App::Status (class)">App::Status</a> to see what the app has available.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_activate_control_app'>activate_control_app</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>unix:///var/run/pumactl.sock</span><span class='tstring_end'>&#39;</span></span></code></pre>
      <pre class='example code ruby'><code><span class='id identifier rubyid_activate_control_app'>activate_control_app</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>unix:///var/run/pumactl.sock</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> { <span class='label'>auth_token:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>12345</span><span class='tstring_end'>&#39;</span></span> }</code></pre>
      <pre class='example code ruby'><code><span class='id identifier rubyid_activate_control_app'>activate_control_app</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>unix:///var/run/pumactl.sock</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> { <span class='label'>no_token:</span> <span class='kw'>true</span> }</code></pre>
  </div>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/v5.0.4/lib/puma/dsl.rb#L127-L150'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='127' data-end='150'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 127</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_activate_control_app'>activate_control_app</span>(<span class='id identifier rubyid_url'>url</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>auto</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_opts'>opts</span><span class='op'>=</span>{})
  <span class='kw'>if</span> <span class='id identifier rubyid_url'>url</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>auto</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='const'><a href="Configuration.html" title="Puma::Configuration (class)">Configuration</a></span>.<span class='id identifier rubyid_temp_path'><a href="Configuration.html#temp_path-class_method" title="Puma::Configuration.temp_path (method)">temp_path</a></span>
    <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_control_url'>control_url</span>] <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>unix://</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_control_url_temp'>control_url_temp</span>] <span class='op'>=</span> <span class='id identifier rubyid_path'>path</span>
  <span class='kw'>else</span>
    <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_control_url'>control_url</span>] <span class='op'>=</span> <span class='id identifier rubyid_url'>url</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_opts'>opts</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_no_token'>no_token</span>]
    <span class='comment'># We need to use &#39;none&#39; rather than :none because this value will be
</span>    <span class='comment'># passed on to an instance of OptionParser, which doesn&#39;t support
</span>    <span class='comment'># symbols as option values.
</span>    <span class='comment'>#
</span>    <span class='comment'># See: https://github.com/puma/puma/issues/1193#issuecomment-305995488
</span>    <span class='id identifier rubyid_auth_token'>auth_token</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>none</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_auth_token'>auth_token</span> <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_auth_token'>auth_token</span>]
    <span class='id identifier rubyid_auth_token'>auth_token</span> <span class='op'>||=</span> <span class='const'><a href="Configuration.html" title="Puma::Configuration (class)">Configuration</a></span>.<span class='id identifier rubyid_random_token'><a href="Configuration.html#random_token-class_method" title="Puma::Configuration.random_token (method)">random_token</a></span>
  <span class='kw'>end</span>

  <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_control_auth_token'>control_auth_token</span>] <span class='op'>=</span> <span class='id identifier rubyid_auth_token'>auth_token</span>
  <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_control_url_umask'>control_url_umask</span>] <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_umask'>umask</span>] <span class='kw'>if</span> <span class='id identifier rubyid_opts'>opts</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_umask'>umask</span>]
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="after_worker_boot-instance_method">
  <h3 class='signature '>
    #<strong>after_worker_boot</strong>(&amp;block)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#after_worker_fork-instance_method" title="Puma::DSL#after_worker_fork (method)">#after_worker_fork</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/v5.0.4/lib/puma/dsl.rb#L514-L514'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='514' data-end='514'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 514</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_alias_method'>alias_method</span> <span class='symbeg'>:</span><span class='id identifier rubyid_after_worker_boot'>after_worker_boot</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_after_worker_fork'><a href="#after_worker_fork-instance_method" title="Puma::DSL#after_worker_fork (method)">after_worker_fork</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="after_worker_fork-instance_method">
  <h3 class='signature '>
    #<strong>after_worker_fork</strong>(&amp;block)  
    <span class='aliases'>Also known as: <span class='names'>#after_worker_boot</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p><a href="Cluster.html" title="Puma::Cluster (class)">Cluster</a> mode only.</p>
</div>
  </div>


<p>Code to run in the master after a worker has been started. The worker&#39;s index is passed as an argument.</p>

<p>This is called everytime a worker is to be started.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_after_worker_fork'>after_worker_fork</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>After worker fork...</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span></code></pre>
  </div>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/v5.0.4/lib/puma/dsl.rb#L509-L512'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='509' data-end='512'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 509</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_after_worker_fork'>after_worker_fork</span>(<span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_after_worker_fork'>after_worker_fork</span>] <span class='op'>||=</span> []
  <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_after_worker_fork'>after_worker_fork</span>] <span class='op'>=</span> <span class='id identifier rubyid_block'>block</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="app-instance_method">
  <h3 class='signature '>
    #<strong>app</strong>(obj = nil, &amp;block)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Use an object or block as the rack application. This allows the configuration file to be the application itself.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_app'>app</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_env'>env</span><span class='op'>|</span>
  <span class='id identifier rubyid_body'>body</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Hello, World!</span><span class='tstring_end'>&#39;</span></span>

  [
    <span class='int'>200</span><span class='comma'>,</span>
    {
      <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Content-Type</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>text/plain</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
      <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Content-Length</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_body'>body</span>.<span class='id identifier rubyid_length'>length</span>.<span class='id identifier rubyid_to_s'>to_s</span>
    }<span class='comma'>,</span>
    [<span class='id identifier rubyid_body'>body</span>]
  ]
<span class='kw'>end</span></code></pre>
  </div>
  <p class='tag_title'>See Also:</p>
  <ul class='see'>
      <li><a href="Configuration.html#app-instance_method" title="Puma::Configuration#app (method)">Configuration#app</a></li>
      </ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/v5.0.4/lib/puma/dsl.rb#L105-L111'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='105' data-end='111'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 105</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_app'>app</span>(<span class='id identifier rubyid_obj'>obj</span><span class='op'>=</span><span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='id identifier rubyid_obj'>obj</span> <span class='op'>||=</span> <span class='id identifier rubyid_block'>block</span>

  <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Provide either a #call&#39;able or a block</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_obj'>obj</span>

  <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_app'>app</span>] <span class='op'>=</span> <span class='id identifier rubyid_obj'>obj</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="before_fork-instance_method">
  <h3 class='signature '>
    #<strong>before_fork</strong>(&amp;block)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p><a href="Cluster.html" title="Puma::Cluster (class)">Cluster</a> mode only.</p>
</div>
  </div>


<p>Code to run immediately before master process forks workers (once on boot). These hooks can block if necessary to wait for background operations unknown to <a href="../Puma.html" title="Puma (module)">::Puma</a> to finish before the process terminates. This can be used to close any connections to remote servers (database, Redis, …) that were opened when preloading the code.</p>

<p>This can be called multiple times to add several hooks.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_before_fork'>before_fork</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Starting workers...</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></code></pre>
  </div>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/v5.0.4/lib/puma/dsl.rb#L447-L450'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='447' data-end='450'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 447</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_before_fork'>before_fork</span>(<span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_before_fork'>before_fork</span>] <span class='op'>||=</span> []
  <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_before_fork'>before_fork</span>] <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_block'>block</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="bind-instance_method">
  <h3 class='signature '>
    #<strong>bind</strong>(url)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Bind the server to <code>url</code>. “tcp://”, “unix://” and “ssl://” are the only accepted protocols. Multiple urls can be bound to, calling <code>bind</code> does not overwrite previous bindings.</p>

<p>The default is “tcp://0.0.0.0:9292”.</p>

<p>You can use query parameters within the url to specify options:</p>
<ul><li>
<p>Set the socket backlog depth with <code>backlog</code>, default is 1024.</p>
</li><li>
<p>Set up an SSL certificate with <code>key</code> &amp; <code>cert</code>.</p>
</li><li>
<p>Set whether to optimize for low latency instead of throughput with <code>low_latency</code>, default is to optimize for low latency. This is done via <code>Socket::TCP_NODELAY</code>.</p>
</li><li>
<p>Set socket permissions with <code>umask</code>.</p>
</li></ul>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Backlog depth</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_bind'>bind</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>unix:///var/run/puma.sock?backlog=512</span><span class='tstring_end'>&#39;</span></span></code></pre>
        <p class='example_title'><div class='inline'>
<p>SSL cert</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_bind'>bind</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ssl://127.0.0.1:9292?key=key.key&amp;cert=cert.pem</span><span class='tstring_end'>&#39;</span></span></code></pre>
        <p class='example_title'><div class='inline'>
<p>Disable optimization for low latency</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_bind'>bind</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>tcp://0.0.0.0:9292?low_latency=false</span><span class='tstring_end'>&#39;</span></span></code></pre>
        <p class='example_title'><div class='inline'>
<p>Socket permissions</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_bind'>bind</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>unix:///var/run/puma.sock?umask=0111</span><span class='tstring_end'>&#39;</span></span></code></pre>
  </div>
  <p class='tag_title'>See Also:</p>
  <ul class='see'>
      <li><a href="Runner.html#load_and_bind-instance_method" title="Puma::Runner#load_and_bind (method)">Runner#load_and_bind</a></li>
          <li><a href="Cluster.html#run-instance_method" title="Puma::Cluster#run (method)">Cluster#run</a></li>
      </ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/v5.0.4/lib/puma/dsl.rb#L185-L188'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='185' data-end='188'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 185</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_bind'>bind</span>(<span class='id identifier rubyid_url'>url</span>)
  <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_binds'>binds</span>] <span class='op'>||=</span> []
  <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_binds'>binds</span>] <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_url'>url</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="clean_thread_locals-instance_method">
  <h3 class='signature '>
    #<strong>clean_thread_locals</strong>(which = true)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Work around leaky apps that leave garbage in Thread locals across requests.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/v5.0.4/lib/puma/dsl.rb#L217-L219'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='217' data-end='219'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 217</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_clean_thread_locals'>clean_thread_locals</span>(<span class='id identifier rubyid_which'>which</span><span class='op'>=</span><span class='kw'>true</span>)
  <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_clean_thread_locals'>clean_thread_locals</span>] <span class='op'>=</span> <span class='id identifier rubyid_which'>which</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="clear_binds!-instance_method">
  <h3 class='signature '>
    #<strong>clear_binds!</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/v5.0.4/lib/puma/dsl.rb#L190-L192'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='190' data-end='192'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 190</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_clear_binds!'>clear_binds!</span>
  <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_binds'>binds</span>] <span class='op'>=</span> []
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="debug-instance_method">
  <h3 class='signature '>
    #<strong>debug</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Show debugging info</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/v5.0.4/lib/puma/dsl.rb#L310-L312'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='310' data-end='312'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 310</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_debug'>debug</span>
  <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_debug'>debug</span>] <span class='op'>=</span> <span class='kw'>true</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="default_host-instance_method">
  <h3 class='signature '>
    #<strong>default_host</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/v5.0.4/lib/puma/dsl.rb#L68-L70'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='68' data-end='70'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 68</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_default_host'>default_host</span>
  <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_default_host'>default_host</span>] <span class='op'>||</span> <span class='const'><a href="Configuration.html" title="Puma::Configuration (class)">Configuration</a></span><span class='op'>::</span><span class='const'><a href="ConfigDefault.html#DefaultTCPHost-constant" title="Puma::ConfigDefault::DefaultTCPHost (constant)">DefaultTCPHost</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="directory-instance_method">
  <h3 class='signature '>
    #<strong>directory</strong>(dir)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>The directory to operate out of.</p>

<p>The default is the current directory.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_directory'>directory</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/u/apps/lolcat</span><span class='tstring_end'>&#39;</span></span></code></pre>
  </div>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/v5.0.4/lib/puma/dsl.rb#L559-L561'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='559' data-end='561'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 559</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_directory'>directory</span>(<span class='id identifier rubyid_dir'>dir</span>)
  <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_directory'>directory</span>] <span class='op'>=</span> <span class='id identifier rubyid_dir'>dir</span>.<span class='id identifier rubyid_to_s'>to_s</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="drain_on_shutdown-instance_method">
  <h3 class='signature '>
    #<strong>drain_on_shutdown</strong>(which = true)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>When shutting down, drain the accept socket of pending connections and process them. This loops over the accept socket until there are no more read events and then stops looking and waits for the requests to finish.</p>

  </div>
</div>
<div class='tags'>
    <p class='tag_title'>See Also:</p>
  <ul class='see'>
      <li><a href="Server.html#graceful_shutdown-instance_method" title="Puma::Server#graceful_shutdown (method)">Server#graceful_shutdown</a></li>
      </ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/v5.0.4/lib/puma/dsl.rb#L226-L228'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='226' data-end='228'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 226</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_drain_on_shutdown'>drain_on_shutdown</span>(<span class='id identifier rubyid_which'>which</span><span class='op'>=</span><span class='kw'>true</span>)
  <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_drain_on_shutdown'>drain_on_shutdown</span>] <span class='op'>=</span> <span class='id identifier rubyid_which'>which</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="early_hints-instance_method">
  <h3 class='signature '>
    #<strong>early_hints</strong>(answer = true)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/v5.0.4/lib/puma/dsl.rb#L324-L326'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='324' data-end='326'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 324</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_early_hints'>early_hints</span>(<span class='id identifier rubyid_answer'>answer</span><span class='op'>=</span><span class='kw'>true</span>)
  <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_early_hints'>early_hints</span>] <span class='op'>=</span> <span class='id identifier rubyid_answer'>answer</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="environment-instance_method">
  <h3 class='signature '>
    #<strong>environment</strong>(environment)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Set the environment in which the rack&#39;s app will run. The value must be a string.</p>

<p>The default is “development”.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_environment'>environment</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>production</span><span class='tstring_end'>&#39;</span></span></code></pre>
  </div>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/v5.0.4/lib/puma/dsl.rb#L237-L239'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='237' data-end='239'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 237</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_environment'>environment</span>(<span class='id identifier rubyid_environment'>environment</span>)
  <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_environment'>environment</span>] <span class='op'>=</span> <span class='id identifier rubyid_environment'>environment</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="extra_runtime_dependencies-instance_method">
  <h3 class='signature '>
    #<strong>extra_runtime_dependencies</strong>(answer = [])  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>When using prune_bundler, if extra runtime dependencies need to be loaded to initialize your app, then this setting can be used. This includes any <a href="../Puma.html" title="Puma (module)">::Puma</a> plugins.</p>

<p>Before bundler is pruned, the gem names supplied will be looked up in the bundler context and then loaded again after bundler is pruned. Only applies if prune_bundler is used.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_extra_runtime_dependencies'>extra_runtime_dependencies</span> [<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>gem_name_1</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>gem_name_2</span><span class='tstring_end'>&#39;</span></span>]</code></pre>
      <pre class='example code ruby'><code><span class='id identifier rubyid_extra_runtime_dependencies'>extra_runtime_dependencies</span> [<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>puma_worker_killer</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>puma-heroku</span><span class='tstring_end'>&#39;</span></span>]</code></pre>
  </div>
  <p class='tag_title'>See Also:</p>
  <ul class='see'>
      <li><a href="Launcher.html#extra_runtime_deps_directories-instance_method" title="Puma::Launcher#extra_runtime_deps_directories (method)">Launcher#extra_runtime_deps_directories</a></li>
      </ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/v5.0.4/lib/puma/dsl.rb#L636-L638'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='636' data-end='638'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 636</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_extra_runtime_dependencies'>extra_runtime_dependencies</span>(<span class='id identifier rubyid_answer'>answer</span> <span class='op'>=</span> [])
  <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_extra_runtime_dependencies'>extra_runtime_dependencies</span>] <span class='op'>=</span> <span class='const'>Array</span>(<span class='id identifier rubyid_answer'>answer</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="first_data_timeout-instance_method">
  <h3 class='signature '>
    #<strong>first_data_timeout</strong>(seconds)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Define how long the tcp socket stays open, if no data has been received.</p>

  </div>
</div>
<div class='tags'>
    <p class='tag_title'>See Also:</p>
  <ul class='see'>
      <li><a href="Server.html#new-class_method" title="Puma::Server.new (method)">Server.new</a></li>
      </ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/v5.0.4/lib/puma/dsl.rb#L211-L213'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='211' data-end='213'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 211</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_first_data_timeout'>first_data_timeout</span>(<span class='id identifier rubyid_seconds'>seconds</span>)
  <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_first_data_timeout'>first_data_timeout</span>] <span class='op'>=</span> <span class='const'>Integer</span>(<span class='id identifier rubyid_seconds'>seconds</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="force_shutdown_after-instance_method">
  <h3 class='signature '>
    #<strong>force_shutdown_after</strong>(val = :forever)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>How long to wait for threads to stop when shutting them down. Defaults to <code>:forever</code>. Specifying <code>:immediately</code> will cause <a href="../Puma.html" title="Puma (module)">::Puma</a> to kill the threads immediately.  Otherwise the value is the number of seconds to wait.</p>

<p><a href="../Puma.html" title="Puma (module)">::Puma</a> always waits a few seconds after killing a thread for it to try to finish up it&#39;s work, even in <code>:immediately</code> mode.</p>

  </div>
</div>
<div class='tags'>
    <p class='tag_title'>See Also:</p>
  <ul class='see'>
      <li><a href="Server.html#graceful_shutdown-instance_method" title="Puma::Server#graceful_shutdown (method)">Server#graceful_shutdown</a></li>
      </ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/v5.0.4/lib/puma/dsl.rb#L249-L260'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='249' data-end='260'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 249</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_force_shutdown_after'>force_shutdown_after</span>(<span class='id identifier rubyid_val'>val</span><span class='op'>=</span><span class='symbeg'>:</span><span class='id identifier rubyid_forever'>forever</span>)
  <span class='id identifier rubyid_i'>i</span> <span class='op'>=</span> <span class='kw'>case</span> <span class='id identifier rubyid_val'>val</span>
      <span class='kw'>when</span> <span class='symbeg'>:</span><span class='id identifier rubyid_forever'>forever</span>
        <span class='op'>-</span><span class='int'>1</span>
      <span class='kw'>when</span> <span class='symbeg'>:</span><span class='id identifier rubyid_immediately'>immediately</span>
        <span class='int'>0</span>
      <span class='kw'>else</span>
        <span class='const'>Float</span>(<span class='id identifier rubyid_val'>val</span>)
      <span class='kw'>end</span>

  <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_force_shutdown_after'>force_shutdown_after</span>] <span class='op'>=</span> <span class='id identifier rubyid_i'>i</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="fork_worker-instance_method">
  <h3 class='signature '>
    #<strong>fork_worker</strong>(after_requests = 1000)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p><a href="Cluster.html" title="Puma::Cluster (class)">Cluster</a> mode only.</p>
</div>
  </div>


<p>When enabled, workers will be forked from worker 0 instead of from the master process. This option is similar to <code>preload_app</code> because the app is preloaded before forking, but it is compatible with phased restart.</p>

<p>This option also enables the <code>refork</code> command (SIGURG), which optimizes copy-on-write performance in a running app.</p>

<p>A refork will automatically trigger once after the specified number of requests (default 1000), or pass 0 to disable auto refork.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Version:</p>
<ul class='version'>
  <li>
    <div class='inline'>
<p>5.0.0</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/v5.0.4/lib/puma/dsl.rb#L793-L795'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='793' data-end='795'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 793</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_fork_worker'>fork_worker</span>(<span class='id identifier rubyid_after_requests'>after_requests</span><span class='op'>=</span><span class='int'>1000</span>)
  <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_fork_worker'>fork_worker</span>] <span class='op'>=</span> <span class='const'>Integer</span>(<span class='id identifier rubyid_after_requests'>after_requests</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="get-instance_method">
  <h3 class='signature '>
    #<strong>get</strong>(key, default = nil)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/v5.0.4/lib/puma/dsl.rb#L76-L78'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='76' data-end='78'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 76</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_get'>get</span>(<span class='id identifier rubyid_key'>key</span><span class='comma'>,</span><span class='id identifier rubyid_default'>default</span><span class='op'>=</span><span class='kw'>nil</span>)
  <span class='ivar'>@options</span>[<span class='id identifier rubyid_key'>key</span>.<span class='id identifier rubyid_to_sym'>to_sym</span>] <span class='op'>||</span> <span class='id identifier rubyid_default'>default</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="inject-instance_method">
  <h3 class='signature '>
    #<strong>inject</strong>(&amp;blk)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/v5.0.4/lib/puma/dsl.rb#L72-L74'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='72' data-end='74'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 72</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_inject'>inject</span>(<span class='op'>&amp;</span><span class='id identifier rubyid_blk'>blk</span>)
  <span class='id identifier rubyid_instance_eval'>instance_eval</span>(<span class='op'>&amp;</span><span class='id identifier rubyid_blk'>blk</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="load-instance_method">
  <h3 class='signature '>
    #<strong>load</strong>(file)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Load additional configuration from a file Files get loaded later via <a href="Configuration.html#load-instance_method" title="Puma::Configuration#load (method)">Configuration#load</a></p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/v5.0.4/lib/puma/dsl.rb#L154-L157'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='154' data-end='157'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 154</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_load'>load</span>(<span class='id identifier rubyid_file'>file</span>)
  <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_config_files'>config_files</span>] <span class='op'>||=</span> []
  <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_config_files'>config_files</span>] <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_file'>file</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="log_formatter-instance_method">
  <h3 class='signature '>
    #<strong>log_formatter</strong>(&amp;block)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/v5.0.4/lib/puma/dsl.rb#L341-L343'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='341' data-end='343'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 341</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_log_formatter'>log_formatter</span>(<span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_log_formatter'>log_formatter</span>] <span class='op'>=</span> <span class='id identifier rubyid_block'>block</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="log_requests-instance_method">
  <h3 class='signature '>
    #<strong>log_requests</strong>(which = true)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Enable request logging</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/v5.0.4/lib/puma/dsl.rb#L304-L306'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='304' data-end='306'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 304</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_log_requests'>log_requests</span>(<span class='id identifier rubyid_which'>which</span><span class='op'>=</span><span class='kw'>true</span>)
  <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_log_requests'>log_requests</span>] <span class='op'>=</span> <span class='id identifier rubyid_which'>which</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="lowlevel_error_handler-instance_method">
  <h3 class='signature '>
    #<strong>lowlevel_error_handler</strong>(obj = nil, &amp;block)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Use <code>obj</code> or <code>block</code> as the low level error handler. This allows the configuration file to change the default error on the server.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_lowlevel_error_handler'>lowlevel_error_handler</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_err'>err</span><span class='op'>|</span>
  [<span class='int'>200</span><span class='comma'>,</span> {}<span class='comma'>,</span> [<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>error page</span><span class='tstring_end'>&quot;</span></span>]]
<span class='kw'>end</span></code></pre>
  </div>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/v5.0.4/lib/puma/dsl.rb#L580-L584'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='580' data-end='584'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 580</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_lowlevel_error_handler'>lowlevel_error_handler</span>(<span class='id identifier rubyid_obj'>obj</span><span class='op'>=</span><span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='id identifier rubyid_obj'>obj</span> <span class='op'>||=</span> <span class='id identifier rubyid_block'>block</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Provide either a #call&#39;able or a block</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_obj'>obj</span>
  <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_lowlevel_error_handler'>lowlevel_error_handler</span>] <span class='op'>=</span> <span class='id identifier rubyid_obj'>obj</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="nakayoshi_fork-instance_method">
  <h3 class='signature '>
    #<strong>nakayoshi_fork</strong>(enabled = true)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>When enabled, <a href="../Puma.html" title="Puma (module)">::Puma</a> will GC 4 times before forking workers. If available (Ruby 2.7+), we will also call <code>GC.compact</code>. Not recommended for non-MRI Rubies.</p>

<p>Based on the work of Koichi Sasada and Aaron Patterson, this option may decrease memory utilization of preload-enabled cluster-mode Pumas. It will also increase time to boot and fork. See your logs for details on how much time this adds to your boot process. For most apps, it will be less than one second.</p>

  </div>
</div>
<div class='tags'>
    <p class='tag_title'>See Also:</p>
  <ul class='see'>
      <li><code>Puma::Cluster#nakayoshi_gc</code></li>
      </ul>
<p class='tag_title'>Version:</p>
<ul class='version'>
  <li>
    <div class='inline'>
<p>5.0.0</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/v5.0.4/lib/puma/dsl.rb#L810-L812'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='810' data-end='812'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 810</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_nakayoshi_fork'>nakayoshi_fork</span>(<span class='id identifier rubyid_enabled'>enabled</span><span class='op'>=</span><span class='kw'>true</span>)
  <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_nakayoshi_fork'>nakayoshi_fork</span>] <span class='op'>=</span> <span class='id identifier rubyid_enabled'>enabled</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="on_refork-instance_method">
  <h3 class='signature '>
    #<strong>on_refork</strong>(&amp;block)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p><a href="Cluster.html" title="Puma::Cluster (class)">Cluster</a> mode with <a href="#fork_worker-instance_method" title="Puma::DSL#fork_worker (method)">#fork_worker</a> enabled only.</p>
</div>
  </div>


<p>When <a href="#fork_worker-instance_method" title="Puma::DSL#fork_worker (method)">#fork_worker</a> is enabled, code to run in Worker 0 before all other workers are re-forked from this process, after the server has temporarily stopped serving requests (once per complete refork cycle).</p>

<p>This can be used to trigger extra garbage-collection to maximize copy-on-write efficiency, or close any connections to remote servers (database, Redis, …) that were opened while the server was running.</p>

<p>This can be called multiple times to add several hooks.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_on_refork'>on_refork</span> <span class='kw'>do</span>
  <span class='int'>3</span>.<span class='id identifier rubyid_times'>times</span> {<span class='const'>GC</span>.<span class='id identifier rubyid_start'>start</span>}
<span class='kw'>end</span></code></pre>
  </div>
<p class='tag_title'>Version:</p>
<ul class='version'>
  <li>
    <div class='inline'>
<p>5.0.0</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/v5.0.4/lib/puma/dsl.rb#L534-L537'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='534' data-end='537'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 534</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_on_refork'>on_refork</span>(<span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_before_refork'>before_refork</span>] <span class='op'>||=</span> []
  <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_before_refork'>before_refork</span>] <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_block'>block</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="on_restart-instance_method">
  <h3 class='signature '>
    #<strong>on_restart</strong>(&amp;block)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Code to run before doing a restart. This code should close log files, database connections, etc.</p>

<p>This can be called multiple times to add code each time.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_on_restart'>on_restart</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>On restart...</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span></code></pre>
  </div>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/v5.0.4/lib/puma/dsl.rb#L271-L274'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='271' data-end='274'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 271</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_on_restart'>on_restart</span>(<span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_on_restart'>on_restart</span>] <span class='op'>||=</span> []
  <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_on_restart'>on_restart</span>] <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_block'>block</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="on_worker_boot-instance_method">
  <h3 class='signature '>
    #<strong>on_worker_boot</strong>(&amp;block)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p><a href="Cluster.html" title="Puma::Cluster (class)">Cluster</a> mode only.</p>
</div>
  </div>


<p>Code to run in a worker when it boots to setup the process before booting the app.</p>

<p>This can be called multiple times to add several hooks.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_on_worker_boot'>on_worker_boot</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Before worker boot...</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span></code></pre>
  </div>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/v5.0.4/lib/puma/dsl.rb#L462-L465'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='462' data-end='465'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 462</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_on_worker_boot'>on_worker_boot</span>(<span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_before_worker_boot'>before_worker_boot</span>] <span class='op'>||=</span> []
  <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_before_worker_boot'>before_worker_boot</span>] <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_block'>block</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="on_worker_fork-instance_method">
  <h3 class='signature '>
    #<strong>on_worker_fork</strong>(&amp;block)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p><a href="Cluster.html" title="Puma::Cluster (class)">Cluster</a> mode only.</p>
</div>
  </div>


<p>Code to run in the master right before a worker is started. The worker&#39;s index is passed as an argument.</p>

<p>This can be called multiple times to add several hooks.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_on_worker_fork'>on_worker_fork</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Before worker fork...</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span></code></pre>
  </div>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/v5.0.4/lib/puma/dsl.rb#L494-L497'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='494' data-end='497'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 494</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_on_worker_fork'>on_worker_fork</span>(<span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_before_worker_fork'>before_worker_fork</span>] <span class='op'>||=</span> []
  <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_before_worker_fork'>before_worker_fork</span>] <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_block'>block</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="on_worker_shutdown-instance_method">
  <h3 class='signature '>
    #<strong>on_worker_shutdown</strong>(&amp;block)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p><a href="Cluster.html" title="Puma::Cluster (class)">Cluster</a> mode only.</p>
</div>
  </div>


<p>Code to run immediately before a worker shuts down (after it has finished processing HTTP requests). These hooks can block if necessary to wait for background operations unknown to <a href="../Puma.html" title="Puma (module)">::Puma</a> to finish before the process terminates.</p>

<p>This can be called multiple times to add several hooks.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_on_worker_shutdown'>on_worker_shutdown</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>On worker shutdown...</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span></code></pre>
  </div>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/v5.0.4/lib/puma/dsl.rb#L479-L482'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='479' data-end='482'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 479</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_on_worker_shutdown'>on_worker_shutdown</span>(<span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_before_worker_shutdown'>before_worker_shutdown</span>] <span class='op'>||=</span> []
  <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_before_worker_shutdown'>before_worker_shutdown</span>] <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_block'>block</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="out_of_band-instance_method">
  <h3 class='signature '>
    #<strong>out_of_band</strong>(&amp;block)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Code to run out-of-band when the worker is idle. These hooks run immediately after a request has finished processing and there are no busy threads on the worker. The worker doesn&#39;t accept new requests until this code finishes.</p>

<p>This hook is useful for running out-of-band garbage collection or scheduling asynchronous tasks to execute after a response.</p>

<p>This can be called multiple times to add several hooks.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/v5.0.4/lib/puma/dsl.rb#L548-L551'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='548' data-end='551'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 548</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_out_of_band'>out_of_band</span>(<span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_out_of_band'>out_of_band</span>] <span class='op'>||=</span> []
  <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_out_of_band'>out_of_band</span>] <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_block'>block</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="persistent_timeout-instance_method">
  <h3 class='signature '>
    #<strong>persistent_timeout</strong>(seconds)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Define how long persistent connections can be idle before <a href="../Puma.html" title="Puma (module)">::Puma</a> closes them.</p>

  </div>
</div>
<div class='tags'>
    <p class='tag_title'>See Also:</p>
  <ul class='see'>
      <li><a href="Server.html#new-class_method" title="Puma::Server.new (method)">Server.new</a></li>
      </ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/v5.0.4/lib/puma/dsl.rb#L205-L207'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='205' data-end='207'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 205</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_persistent_timeout'>persistent_timeout</span>(<span class='id identifier rubyid_seconds'>seconds</span>)
  <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_persistent_timeout'>persistent_timeout</span>] <span class='op'>=</span> <span class='const'>Integer</span>(<span class='id identifier rubyid_seconds'>seconds</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="pidfile-instance_method">
  <h3 class='signature '>
    #<strong>pidfile</strong>(path)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Store the pid of the server in the file at “path”.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_pidfile'>pidfile</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/u/apps/lolcat/tmp/pids/puma.pid</span><span class='tstring_end'>&#39;</span></span></code></pre>
  </div>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/v5.0.4/lib/puma/dsl.rb#L290-L292'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='290' data-end='292'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 290</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_pidfile'>pidfile</span>(<span class='id identifier rubyid_path'>path</span>)
  <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_pidfile'>pidfile</span>] <span class='op'>=</span> <span class='id identifier rubyid_path'>path</span>.<span class='id identifier rubyid_to_s'>to_s</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="plugin-instance_method">
  <h3 class='signature '>
    #<strong>plugin</strong>(name)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Load the named plugin for use by this configuration</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/v5.0.4/lib/puma/dsl.rb#L82-L84'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='82' data-end='84'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 82</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_plugin'>plugin</span>(<span class='id identifier rubyid_name'>name</span>)
  <span class='ivar'>@plugins</span> <span class='op'>&lt;&lt;</span> <span class='ivar'>@config</span>.<span class='id identifier rubyid_load_plugin'>load_plugin</span>(<span class='id identifier rubyid_name'>name</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="port-instance_method">
  <h3 class='signature '>
    #<strong>port</strong>(port, host = nil)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Define the TCP port to bind to. Use <a href="#bind-instance_method" title="Puma::DSL#bind (method)">#bind</a> for more advanced options.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_port'>port</span> <span class='int'>9292</span></code></pre>
  </div>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/v5.0.4/lib/puma/dsl.rb#L198-L201'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='198' data-end='201'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 198</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_port'>port</span>(<span class='id identifier rubyid_port'>port</span><span class='comma'>,</span> <span class='id identifier rubyid_host'>host</span><span class='op'>=</span><span class='kw'>nil</span>)
  <span class='id identifier rubyid_host'>host</span> <span class='op'>||=</span> <span class='id identifier rubyid_default_host'><a href="#default_host-instance_method" title="Puma::DSL#default_host (method)">default_host</a></span>
  <span class='id identifier rubyid_bind'><a href="#bind-instance_method" title="Puma::DSL#bind (method)">bind</a></span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>tcp://</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_host'>host</span><span class='embexpr_end'>}</span><span class='tstring_content'>:</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_port'>port</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="preload_app!-instance_method">
  <h3 class='signature '>
    #<strong>preload_app!</strong>(answer = true)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p><a href="Cluster.html" title="Puma::Cluster (class)">Cluster</a> mode only.</p>
</div>
  </div>


<p>Preload the application before starting the workers; this conflicts with phased restart feature. This is off by default.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_preload_app!'>preload_app!</span></code></pre>
  </div>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/v5.0.4/lib/puma/dsl.rb#L569-L571'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='569' data-end='571'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 569</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_preload_app!'>preload_app!</span>(<span class='id identifier rubyid_answer'>answer</span><span class='op'>=</span><span class='kw'>true</span>)
  <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_preload_app'>preload_app</span>] <span class='op'>=</span> <span class='id identifier rubyid_answer'>answer</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="prune_bundler-instance_method">
  <h3 class='signature '>
    #<strong>prune_bundler</strong>(answer = true)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>This is incompatible with <a href="#preload_app!-instance_method" title="Puma::DSL#preload_app! (method)">#preload_app!</a>.</p>
</div>
  </div>

  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>This is only supported for RubyGems 2.2+</p>
</div>
  </div>


<p>This option is used to allow your app and its gems to be properly reloaded when not using preload.</p>

<p>When set, if <a href="../Puma.html" title="Puma (module)">::Puma</a> detects that it&#39;s been invoked in the context of Bundler, it will cleanup the environment and re-run itself outside the Bundler environment, but directly using the files that Bundler has setup.</p>

<p>This means that <a href="../Puma.html" title="Puma (module)">::Puma</a> is now decoupled from your Bundler context and when each worker loads, it will be loading a new Bundler context and thus can float around as the release dictates.</p>

  </div>
</div>
<div class='tags'>
    <p class='tag_title'>See Also:</p>
  <ul class='see'>
      <li><a href="#extra_runtime_dependencies-instance_method" title="Puma::DSL#extra_runtime_dependencies (method)">#extra_runtime_dependencies</a></li>
      </ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/v5.0.4/lib/puma/dsl.rb#L603-L605'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='603' data-end='605'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 603</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_prune_bundler'>prune_bundler</span>(<span class='id identifier rubyid_answer'>answer</span><span class='op'>=</span><span class='kw'>true</span>)
  <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_prune_bundler'>prune_bundler</span>] <span class='op'>=</span> <span class='id identifier rubyid_answer'>answer</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="queue_requests-instance_method">
  <h3 class='signature '>
    #<strong>queue_requests</strong>(answer = true)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>When set to true (the default), workers accept all requests and queue them before passing them to the handlers. When set to false, each worker process accepts exactly as many requests as it is configured to simultaneously handle.</p>

<p>Queueing requests generally improves performance. In some cases, such as a single threaded application, it may be better to ensure requests get balanced across workers.</p>

<p>Note that setting this to false disables HTTP keepalive and slow clients will occupy a handler thread while the request is being sent. A reverse proxy, such as nginx, can handle slow clients and queue requests before they reach <a href="../Puma.html" title="Puma (module)">::Puma</a>.</p>

  </div>
</div>
<div class='tags'>
    <p class='tag_title'>See Also:</p>
  <ul class='see'>
      <li><a href="Server.html" title="Puma::Server (class)">Server</a></li>
      </ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/v5.0.4/lib/puma/dsl.rb#L713-L715'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='713' data-end='715'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 713</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_queue_requests'>queue_requests</span>(<span class='id identifier rubyid_answer'>answer</span><span class='op'>=</span><span class='kw'>true</span>)
  <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_queue_requests'>queue_requests</span>] <span class='op'>=</span> <span class='id identifier rubyid_answer'>answer</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="quiet-instance_method">
  <h3 class='signature '>
    #<strong>quiet</strong>(which = true)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Disable request logging, if this isn&#39;t used it&#39;ll be enabled by default.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_quiet'>quiet</span></code></pre>
  </div>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/v5.0.4/lib/puma/dsl.rb#L298-L300'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='298' data-end='300'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 298</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_quiet'>quiet</span>(<span class='id identifier rubyid_which'>which</span><span class='op'>=</span><span class='kw'>true</span>)
  <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_log_requests'><a href="#log_requests-instance_method" title="Puma::DSL#log_requests (method)">log_requests</a></span>] <span class='op'>=</span> <span class='op'>!</span><span class='id identifier rubyid_which'>which</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="rackup-instance_method">
  <h3 class='signature '>
    #<strong>rackup</strong>(path)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Load <code>path</code> as a rackup file.</p>

<p>The default is “config.ru”.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_rackup'>rackup</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/u/apps/lolcat/config.ru</span><span class='tstring_end'>&#39;</span></span></code></pre>
  </div>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/v5.0.4/lib/puma/dsl.rb#L320-L322'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='320' data-end='322'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 320</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_rackup'>rackup</span>(<span class='id identifier rubyid_path'>path</span>)
  <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_rackup'>rackup</span>] <span class='op'>||=</span> <span class='id identifier rubyid_path'>path</span>.<span class='id identifier rubyid_to_s'>to_s</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="raise_exception_on_sigterm-instance_method">
  <h3 class='signature '>
    #<strong>raise_exception_on_sigterm</strong>(answer = true)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>By default, <a href="../Puma.html" title="Puma (module)">::Puma</a> will raise SignalException when SIGTERM is received. In environments where SIGTERM is something expected, you can suppress these with this option.</p>

<p>This can be useful for example in Kubernetes, where rolling restart is guaranteed usually on infrastructure level.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_raise_exception_on_sigterm'>raise_exception_on_sigterm</span> <span class='kw'>false</span></code></pre>
  </div>
  <p class='tag_title'>See Also:</p>
  <ul class='see'>
      <li><a href="Launcher.html#setup_signals-instance_method" title="Puma::Launcher#setup_signals (method)">Launcher#setup_signals</a></li>
          <li><a href="Cluster.html#setup_signals-instance_method" title="Puma::Cluster#setup_signals (method)">Cluster#setup_signals</a></li>
      </ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/v5.0.4/lib/puma/dsl.rb#L619-L621'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='619' data-end='621'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 619</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_raise_exception_on_sigterm'>raise_exception_on_sigterm</span>(<span class='id identifier rubyid_answer'>answer</span><span class='op'>=</span><span class='kw'>true</span>)
  <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_raise_exception_on_sigterm'>raise_exception_on_sigterm</span>] <span class='op'>=</span> <span class='id identifier rubyid_answer'>answer</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="restart_command-instance_method">
  <h3 class='signature '>
    #<strong>restart_command</strong>(cmd)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Command to use to restart <a href="../Puma.html" title="Puma (module)">::Puma</a>. This should be just how to load <a href="../Puma.html" title="Puma (module)">::Puma</a> itself (ie. &#39;ruby -Ilib bin/puma&#39;), not the arguments to <a href="../Puma.html" title="Puma (module)">::Puma</a>, as those are the same as the original process.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_restart_command'>restart_command</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/u/app/lolcat/bin/restart_puma</span><span class='tstring_end'>&#39;</span></span></code></pre>
  </div>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/v5.0.4/lib/puma/dsl.rb#L282-L284'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='282' data-end='284'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 282</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_restart_command'>restart_command</span>(<span class='id identifier rubyid_cmd'>cmd</span>)
  <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_restart_cmd'>restart_cmd</span>] <span class='op'>=</span> <span class='id identifier rubyid_cmd'>cmd</span>.<span class='id identifier rubyid_to_s'>to_s</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="set_default_host-instance_method">
  <h3 class='signature '>
    #<strong>set_default_host</strong>(host)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/v5.0.4/lib/puma/dsl.rb#L64-L66'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='64' data-end='66'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 64</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_set_default_host'>set_default_host</span>(<span class='id identifier rubyid_host'>host</span>)
  <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_default_host'><a href="#default_host-instance_method" title="Puma::DSL#default_host (method)">default_host</a></span>] <span class='op'>=</span> <span class='id identifier rubyid_host'>host</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="set_remote_address-instance_method">
  <h3 class='signature '>
    #<strong>set_remote_address</strong>(val = :socket)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Control how the remote address of the connection is set. This is configurable because to calculate the true socket peer address a kernel syscall is required which for very fast rack handlers slows down the handling significantly.</p>

<p>There are 4 possible values:</p>
<ol><li>
<p>*<strong>:socket</strong>* (the default) - read the peername from the socket using the syscall. This is the normal behavior.</p>
</li><li>
<p>*<strong>:localhost</strong>* - set the remote address to “127.0.0.1”</p>
</li><li>
<p>**header: &lt;http_header&gt;**- set the remote address to the value of the provided http header. For instance: `set_remote_address header: “X-Real-IP”`. Only the first word (as separated by spaces or comma) is used, allowing headers such as X-Forwarded-For to be used as well.</p>
</li><li>
<p>**&lt;Any string&gt;** - this allows you to hardcode remote address to any value you wish. Because Puma never uses this field anyway, it&#39;s format is entirely in your hands.</p>
</li></ol>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/v5.0.4/lib/puma/dsl.rb#L758-L778'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='758' data-end='778'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 758</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_set_remote_address'>set_remote_address</span>(<span class='id identifier rubyid_val'>val</span><span class='op'>=</span><span class='symbeg'>:</span><span class='id identifier rubyid_socket'>socket</span>)
  <span class='kw'>case</span> <span class='id identifier rubyid_val'>val</span>
  <span class='kw'>when</span> <span class='symbeg'>:</span><span class='id identifier rubyid_socket'>socket</span>
    <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_remote_address'>remote_address</span>] <span class='op'>=</span> <span class='id identifier rubyid_val'>val</span>
  <span class='kw'>when</span> <span class='symbeg'>:</span><span class='id identifier rubyid_localhost'>localhost</span>
    <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_remote_address'>remote_address</span>] <span class='op'>=</span> <span class='symbeg'>:</span><span class='id identifier rubyid_value'>value</span>
    <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_remote_address_value'>remote_address_value</span>] <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>127.0.0.1</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_freeze'>freeze</span>
  <span class='kw'>when</span> <span class='const'>String</span>
    <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_remote_address'>remote_address</span>] <span class='op'>=</span> <span class='symbeg'>:</span><span class='id identifier rubyid_value'>value</span>
    <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_remote_address_value'>remote_address_value</span>] <span class='op'>=</span> <span class='id identifier rubyid_val'>val</span>
  <span class='kw'>when</span> <span class='const'>Hash</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_hdr'>hdr</span> <span class='op'>=</span> <span class='id identifier rubyid_val'>val</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_header'>header</span>]
      <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_remote_address'>remote_address</span>] <span class='op'>=</span> <span class='symbeg'>:</span><span class='id identifier rubyid_header'>header</span>
      <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_remote_address_header'>remote_address_header</span>] <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>HTTP_</span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_hdr'>hdr</span>.<span class='id identifier rubyid_upcase'>upcase</span>.<span class='id identifier rubyid_tr'>tr</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>-</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>_</span><span class='tstring_end'>&quot;</span></span>)
    <span class='kw'>else</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Invalid value for set_remote_address - </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_val'>val</span>.<span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Invalid value for set_remote_address - </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_val'>val</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="shutdown_debug-instance_method">
  <h3 class='signature '>
    #<strong>shutdown_debug</strong>(val = true)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>When a shutdown is requested, the backtraces of all the threads will be written to $stdout. This can help figure out why shutdown is hanging.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/v5.0.4/lib/puma/dsl.rb#L721-L723'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='721' data-end='723'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 721</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_shutdown_debug'>shutdown_debug</span>(<span class='id identifier rubyid_val'>val</span><span class='op'>=</span><span class='kw'>true</span>)
  <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_shutdown_debug'>shutdown_debug</span>] <span class='op'>=</span> <span class='id identifier rubyid_val'>val</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ssl_bind-instance_method">
  <h3 class='signature '>
    #<strong>ssl_bind</strong>(host, port, opts)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Instead of <code>bind &#39;ssl://127.0.0.1:9292?key=key_path&amp;cert=cert_path&#39;</code> you can also use the this method.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_ssl_bind'>ssl_bind</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>127.0.0.1</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>9292</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> {
  <span class='label'>cert:</span> <span class='id identifier rubyid_path_to_cert'>path_to_cert</span><span class='comma'>,</span>
  <span class='label'>key:</span> <span class='id identifier rubyid_path_to_key'>path_to_key</span><span class='comma'>,</span>
  <span class='label'>ssl_cipher_filter:</span> <span class='id identifier rubyid_cipher_filter'>cipher_filter</span><span class='comma'>,</span> <span class='comment'># optional
</span>  <span class='label'>verify_mode:</span> <span class='id identifier rubyid_verify_mode'>verify_mode</span><span class='comma'>,</span>         <span class='comment'># default &#39;none&#39;
</span>}</code></pre>
        <p class='example_title'><div class='inline'>
<p>For JRuby additional keys are required: keystore &amp; keystore_pass.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_ssl_bind'>ssl_bind</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>127.0.0.1</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>9292</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> {
  <span class='label'>cert:</span> <span class='id identifier rubyid_path_to_cert'>path_to_cert</span><span class='comma'>,</span>
  <span class='label'>key:</span> <span class='id identifier rubyid_path_to_key'>path_to_key</span><span class='comma'>,</span>
  <span class='label'>ssl_cipher_filter:</span> <span class='id identifier rubyid_cipher_filter'>cipher_filter</span><span class='comma'>,</span> <span class='comment'># optional
</span>  <span class='label'>verify_mode:</span> <span class='id identifier rubyid_verify_mode'>verify_mode</span><span class='comma'>,</span>         <span class='comment'># default &#39;none&#39;
</span>  <span class='label'>keystore:</span> <span class='id identifier rubyid_path_to_keystore'>path_to_keystore</span><span class='comma'>,</span>
  <span class='label'>keystore_pass:</span> <span class='id identifier rubyid_password'>password</span>
}</code></pre>
  </div>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/v5.0.4/lib/puma/dsl.rb#L388-L401'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='388' data-end='401'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 388</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_ssl_bind'>ssl_bind</span>(<span class='id identifier rubyid_host'>host</span><span class='comma'>,</span> <span class='id identifier rubyid_port'><a href="#port-instance_method" title="Puma::DSL#port (method)">port</a></span><span class='comma'>,</span> <span class='id identifier rubyid_opts'>opts</span>)
  <span class='id identifier rubyid_verify'>verify</span> <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span>.<span class='id identifier rubyid_fetch'>fetch</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_verify_mode'>verify_mode</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>none</span><span class='tstring_end'>&#39;</span></span>).<span class='id identifier rubyid_to_s'>to_s</span>
  <span class='id identifier rubyid_no_tlsv1'>no_tlsv1</span> <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span>.<span class='id identifier rubyid_fetch'>fetch</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_no_tlsv1'>no_tlsv1</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>false</span><span class='tstring_end'>&#39;</span></span>)
  <span class='id identifier rubyid_no_tlsv1_1'>no_tlsv1_1</span> <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span>.<span class='id identifier rubyid_fetch'>fetch</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_no_tlsv1_1'>no_tlsv1_1</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>false</span><span class='tstring_end'>&#39;</span></span>)
  <span class='id identifier rubyid_ca_additions'>ca_additions</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&amp;ca=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_opts'>opts</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_ca'>ca</span>]<span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> [<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>peer</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>force_peer</span><span class='tstring_end'>&#39;</span></span>].<span class='id identifier rubyid_include?'>include?</span>(<span class='id identifier rubyid_verify'>verify</span>)

  <span class='kw'>if</span> <span class='kw'>defined?</span>(<span class='const'>JRUBY_VERSION</span>)
    <span class='id identifier rubyid_keystore_additions'>keystore_additions</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>keystore=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_opts'>opts</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_keystore'>keystore</span>]<span class='embexpr_end'>}</span><span class='tstring_content'>&amp;keystore-pass=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_opts'>opts</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_keystore_pass'>keystore_pass</span>]<span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_bind'><a href="#bind-instance_method" title="Puma::DSL#bind (method)">bind</a></span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ssl://</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_host'>host</span><span class='embexpr_end'>}</span><span class='tstring_content'>:</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_port'><a href="#port-instance_method" title="Puma::DSL#port (method)">port</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>?cert=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_opts'>opts</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_cert'>cert</span>]<span class='embexpr_end'>}</span><span class='tstring_content'>&amp;key=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_opts'>opts</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_key'>key</span>]<span class='embexpr_end'>}</span><span class='tstring_content'>&amp;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_keystore_additions'>keystore_additions</span><span class='embexpr_end'>}</span><span class='tstring_content'>&amp;verify_mode=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_verify'>verify</span><span class='embexpr_end'>}</span><span class='tstring_content'>&amp;no_tlsv1=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_no_tlsv1'>no_tlsv1</span><span class='embexpr_end'>}</span><span class='tstring_content'>&amp;no_tlsv1_1=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_no_tlsv1_1'>no_tlsv1_1</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_ca_additions'>ca_additions</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_ssl_cipher_filter'>ssl_cipher_filter</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&amp;ssl_cipher_filter=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_opts'>opts</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_ssl_cipher_filter'>ssl_cipher_filter</span>]<span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_opts'>opts</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_ssl_cipher_filter'>ssl_cipher_filter</span>]
    <span class='id identifier rubyid_bind'><a href="#bind-instance_method" title="Puma::DSL#bind (method)">bind</a></span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ssl://</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_host'>host</span><span class='embexpr_end'>}</span><span class='tstring_content'>:</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_port'><a href="#port-instance_method" title="Puma::DSL#port (method)">port</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>?cert=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_opts'>opts</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_cert'>cert</span>]<span class='embexpr_end'>}</span><span class='tstring_content'>&amp;key=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_opts'>opts</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_key'>key</span>]<span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_ssl_cipher_filter'>ssl_cipher_filter</span><span class='embexpr_end'>}</span><span class='tstring_content'>&amp;verify_mode=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_verify'>verify</span><span class='embexpr_end'>}</span><span class='tstring_content'>&amp;no_tlsv1=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_no_tlsv1'>no_tlsv1</span><span class='embexpr_end'>}</span><span class='tstring_content'>&amp;no_tlsv1_1=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_no_tlsv1_1'>no_tlsv1_1</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_ca_additions'>ca_additions</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="state_path-instance_method">
  <h3 class='signature '>
    #<strong>state_path</strong>(path)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Use <code>path</code> as the file to store the server info state. This is used by <code>pumactl</code> to query and control the server.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_state_path'>state_path</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/u/apps/lolcat/tmp/pids/puma.state</span><span class='tstring_end'>&#39;</span></span></code></pre>
  </div>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/v5.0.4/lib/puma/dsl.rb#L408-L410'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='408' data-end='410'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 408</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_state_path'>state_path</span>(<span class='id identifier rubyid_path'>path</span>)
  <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_state'>state</span>] <span class='op'>=</span> <span class='id identifier rubyid_path'>path</span>.<span class='id identifier rubyid_to_s'>to_s</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="state_permission-instance_method">
  <h3 class='signature '>
    #<strong>state_permission</strong>(permission)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Use <code>permission</code> to restrict permissions for the state file.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_state_permission'>state_permission</span> <span class='int'>0600</span></code></pre>
  </div>
<p class='tag_title'>Version:</p>
<ul class='version'>
  <li>
    <div class='inline'>
<p>5.0.0</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/v5.0.4/lib/puma/dsl.rb#L418-L420'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='418' data-end='420'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 418</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_state_permission'>state_permission</span>(<span class='id identifier rubyid_permission'>permission</span>)
  <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_state_permission'>state_permission</span>] <span class='op'>=</span> <span class='id identifier rubyid_permission'>permission</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="stdout_redirect-instance_method">
  <h3 class='signature '>
    #<strong>stdout_redirect</strong>(stdout = nil, stderr = nil, append = false)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Redirect <code>STDOUT</code> and <code>STDERR</code> to files specified. The <code>append</code> parameter specifies whether the output is appended, the default is <code>false</code>.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_stdout_redirect'>stdout_redirect</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/app/lolcat/log/stdout</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/app/lolcat/log/stderr</span><span class='tstring_end'>&#39;</span></span></code></pre>
      <pre class='example code ruby'><code><span class='id identifier rubyid_stdout_redirect'>stdout_redirect</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/app/lolcat/log/stdout</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/app/lolcat/log/stderr</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='kw'>true</span></code></pre>
  </div>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/v5.0.4/lib/puma/dsl.rb#L335-L339'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='335' data-end='339'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 335</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_stdout_redirect'>stdout_redirect</span>(<span class='id identifier rubyid_stdout'>stdout</span><span class='op'>=</span><span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_stderr'>stderr</span><span class='op'>=</span><span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_append'>append</span><span class='op'>=</span><span class='kw'>false</span>)
  <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_redirect_stdout'>redirect_stdout</span>] <span class='op'>=</span> <span class='id identifier rubyid_stdout'>stdout</span>
  <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_redirect_stderr'>redirect_stderr</span>] <span class='op'>=</span> <span class='id identifier rubyid_stderr'>stderr</span>
  <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_redirect_append'>redirect_append</span>] <span class='op'>=</span> <span class='id identifier rubyid_append'>append</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="tag-instance_method">
  <h3 class='signature '>
    #<strong>tag</strong>(string)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Additional text to display in process listing.</p>

<p>If you do not specify a tag, <a href="../Puma.html" title="Puma (module)">::Puma</a> will infer it. If you do not want <a href="../Puma.html" title="Puma (module)">::Puma</a> to add a tag, use an empty string.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_tag'>tag</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>app name</span><span class='tstring_end'>&#39;</span></span></code></pre>
      <pre class='example code ruby'><code><span class='id identifier rubyid_tag'>tag</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span></code></pre>
  </div>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/v5.0.4/lib/puma/dsl.rb#L649-L651'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='649' data-end='651'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 649</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_tag'>tag</span>(<span class='id identifier rubyid_string'>string</span>)
  <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_tag'>tag</span>] <span class='op'>=</span> <span class='id identifier rubyid_string'>string</span>.<span class='id identifier rubyid_to_s'>to_s</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="threads-instance_method">
  <h3 class='signature '>
    #<strong>threads</strong>(min, max)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Configure <code>min</code> to be the minimum number of threads to use to answer requests and <code>max</code> the maximum.</p>

<p>The default is “0, 16”.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_threads'>threads</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>16</span></code></pre>
      <pre class='example code ruby'><code><span class='id identifier rubyid_threads'>threads</span> <span class='int'>5</span><span class='comma'>,</span> <span class='int'>5</span></code></pre>
  </div>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/v5.0.4/lib/puma/dsl.rb#L354-L367'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='354' data-end='367'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 354</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_threads'>threads</span>(<span class='id identifier rubyid_min'>min</span><span class='comma'>,</span> <span class='id identifier rubyid_max'>max</span>)
  <span class='id identifier rubyid_min'>min</span> <span class='op'>=</span> <span class='const'>Integer</span>(<span class='id identifier rubyid_min'>min</span>)
  <span class='id identifier rubyid_max'>max</span> <span class='op'>=</span> <span class='const'>Integer</span>(<span class='id identifier rubyid_max'>max</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_min'>min</span> <span class='op'>&gt;</span> <span class='id identifier rubyid_max'>max</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>The minimum (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_min'>min</span><span class='embexpr_end'>}</span><span class='tstring_content'>) number of threads must be less than or equal to the max (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_max'>max</span><span class='embexpr_end'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_max'>max</span> <span class='op'>&lt;</span> <span class='int'>1</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>The maximum number of threads (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_max'>max</span><span class='embexpr_end'>}</span><span class='tstring_content'>) must be greater than 0</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_min_threads'>min_threads</span>] <span class='op'>=</span> <span class='id identifier rubyid_min'>min</span>
  <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_max_threads'>max_threads</span>] <span class='op'>=</span> <span class='id identifier rubyid_max'>max</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="wait_for_less_busy_worker-instance_method">
  <h3 class='signature '>
    #<strong>wait_for_less_busy_worker</strong>(val = 0.005)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Attempts to route traffic to less-busy workers by causing them to delay listening on the socket, allowing workers which are not processing any requests to pick up new requests first.</p>

<p>Only works on MRI. For all other interpreters, this setting does nothing.</p>

  </div>
</div>
<div class='tags'>
    <p class='tag_title'>See Also:</p>
  <ul class='see'>
      <li><a href="Server.html#handle_servers-instance_method" title="Puma::Server#handle_servers (method)">Server#handle_servers</a></li>
          <li><a href="ThreadPool.html#wait_for_less_busy_worker-instance_method" title="Puma::ThreadPool#wait_for_less_busy_worker (method)">ThreadPool#wait_for_less_busy_worker</a></li>
      </ul>
<p class='tag_title'>Version:</p>
<ul class='version'>
  <li>
    <div class='inline'>
<p>5.0.0</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/v5.0.4/lib/puma/dsl.rb#L735-L737'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='735' data-end='737'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 735</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_wait_for_less_busy_worker'>wait_for_less_busy_worker</span>(<span class='id identifier rubyid_val'>val</span><span class='op'>=</span><span class='float'>0.005</span>)
  <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_wait_for_less_busy_worker'>wait_for_less_busy_worker</span>] <span class='op'>=</span> <span class='id identifier rubyid_val'>val</span>.<span class='id identifier rubyid_to_f'>to_f</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="worker_boot_timeout-instance_method">
  <h3 class='signature '>
    #<strong>worker_boot_timeout</strong>(timeout)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p><a href="Cluster.html" title="Puma::Cluster (class)">Cluster</a> mode only.</p>
</div>
  </div>


<p>Change the default worker timeout for booting.</p>

<p>If unspecified, this defaults to the value of worker_timeout.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_worker_boot_timeout'>worker_boot_timeout</span> <span class='int'>60</span></code></pre>
  </div>
  <p class='tag_title'>See Also:</p>
  <ul class='see'>
      <li><code>Puma::Cluster::Worker#ping_timeout</code></li>
      </ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/v5.0.4/lib/puma/dsl.rb#L686-L688'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='686' data-end='688'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 686</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_worker_boot_timeout'>worker_boot_timeout</span>(<span class='id identifier rubyid_timeout'>timeout</span>)
  <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_worker_boot_timeout'>worker_boot_timeout</span>] <span class='op'>=</span> <span class='const'>Integer</span>(<span class='id identifier rubyid_timeout'>timeout</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="worker_shutdown_timeout-instance_method">
  <h3 class='signature '>
    #<strong>worker_shutdown_timeout</strong>(timeout)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p><a href="Cluster.html" title="Puma::Cluster (class)">Cluster</a> mode only.</p>
</div>
  </div>


<p>Set the timeout for worker shutdown.</p>

  </div>
</div>
<div class='tags'>
    <p class='tag_title'>See Also:</p>
  <ul class='see'>
      <li><code>Puma::Cluster::Worker#term</code></li>
      </ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/v5.0.4/lib/puma/dsl.rb#L695-L697'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='695' data-end='697'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 695</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_worker_shutdown_timeout'>worker_shutdown_timeout</span>(<span class='id identifier rubyid_timeout'>timeout</span>)
  <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_worker_shutdown_timeout'>worker_shutdown_timeout</span>] <span class='op'>=</span> <span class='const'>Integer</span>(<span class='id identifier rubyid_timeout'>timeout</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="worker_timeout-instance_method">
  <h3 class='signature '>
    #<strong>worker_timeout</strong>(timeout)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p><a href="Cluster.html" title="Puma::Cluster (class)">Cluster</a> mode only.</p>
</div>
  </div>


<p>Verifies that all workers have checked in to the master process within the given timeout. If not the worker process will be restarted. This is not a request timeout, it is to protect against a hung or dead process. Setting this value will not protect against slow requests.</p>

<p>The minimum value is 6 seconds, the default value is 60 seconds.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_worker_timeout'>worker_timeout</span> <span class='int'>60</span></code></pre>
  </div>
  <p class='tag_title'>See Also:</p>
  <ul class='see'>
      <li><code>Puma::Cluster::Worker#ping_timeout</code></li>
      </ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/v5.0.4/lib/puma/dsl.rb#L665-L674'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='665' data-end='674'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 665</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_worker_timeout'>worker_timeout</span>(<span class='id identifier rubyid_timeout'>timeout</span>)
  <span class='id identifier rubyid_timeout'>timeout</span> <span class='op'>=</span> <span class='const'>Integer</span>(<span class='id identifier rubyid_timeout'>timeout</span>)
  <span class='id identifier rubyid_min'>min</span> <span class='op'>=</span> <span class='const'><a href="Const.html" title="Puma::Const (module)">Const</a></span><span class='op'>::</span><span class='const'><a href="Const.html#WORKER_CHECK_INTERVAL-constant" title="Puma::Const::WORKER_CHECK_INTERVAL (constant)">WORKER_CHECK_INTERVAL</a></span>

  <span class='kw'>if</span> <span class='id identifier rubyid_timeout'>timeout</span> <span class='op'>&lt;=</span> <span class='id identifier rubyid_min'>min</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>The minimum worker_timeout must be greater than the worker reporting interval (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_min'>min</span><span class='embexpr_end'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_worker_timeout'>worker_timeout</span>] <span class='op'>=</span> <span class='id identifier rubyid_timeout'>timeout</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="workers-instance_method">
  <h3 class='signature '>
    #<strong>workers</strong>(count)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p><a href="Cluster.html" title="Puma::Cluster (class)">Cluster</a> mode only.</p>
</div>
  </div>


<p>How many worker processes to run.  Typically this is set to the number of available cores.</p>

<p>The default is 0.</p>

  </div>
</div>
<div class='tags'>
    <p class='tag_title'>See Also:</p>
  <ul class='see'>
      <li><a href="Cluster.html" title="Puma::Cluster (class)">Cluster</a></li>
      </ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/v5.0.4/lib/puma/dsl.rb#L429-L431'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='429' data-end='431'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 429</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_workers'>workers</span>(<span class='id identifier rubyid_count'>count</span>)
  <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_workers'>workers</span>] <span class='op'>=</span> <span class='id identifier rubyid_count'>count</span>.<span class='id identifier rubyid_to_i'>to_i</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>